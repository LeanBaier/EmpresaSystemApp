import{_ as c,u as f,c as p,a as e,b,w as P,d as v,e as r,v as d,n as o,F as y,r as w,t as l,f as u,g as O,o as g,h as k}from"./index-3fwSCxJc.js";const D={data:()=>({employees:[],filters:{name:"",lastname:"",lowerBirthdate:"",higherBirthdate:"",lowerRegistrationDate:"",higherRegistrationDate:""},pageOptions:{actualPage:1,size:10,hasNextPage:!0,hasPreviousPage:!0,totalPages:0,totalRecords:0},loadingPage:!0}),mounted(){this.fetchEmployees(1)},methods:{async fetchEmployees(t){this.loadingPage=!0;let s=new URL("http://localhost:8080/api/v1/employees/search");s.searchParams.append("page",t),s.searchParams.append("size",this.pageOptions.size),this.filters.name&&s.searchParams.append("name",this.filters.name),this.filters.lastname&&s.searchParams.append("lastname",this.filters.lastname),this.filters.lowerBirthdate&&s.searchParams.append("birthdateSince",this.filters.lowerBirthdate),this.filters.higherBirthdate&&s.searchParams.append("birthdateUntil",this.filters.higherBirthdate),this.filters.lowerRegistrationDate&&s.searchParams.append("registrationDateSince",this.filters.lowerRegistrationDate),this.filters.higherRegistrationDate&&s.searchParams.append("registrationDateUntil",this.filters.higherRegistrationDate);let h=await f().accessToken;await fetch(s,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:h}}).then(async i=>{i=await i.json(),this.employees=i.data,this.pageOptions.totalPages=i.totalPages,this.pageOptions.totalRecords=i.totalRecords,this.pageOptions.hasNextPage=i.totalPages>t,this.pageOptions.hasPreviousPage=t>1,this.pageOptions.actualPage=t,this.loadingPage=!1}).catch(i=>console.log(i))}}},R={class:"container"},E={class:"columns m-1"},B={class:"column is-2-desktop mt-6"},N={class:"container mb-6"},C={class:"field"},V=e("label",{class:"label"},"Registros por Página",-1),U={class:"control"},_={class:"field"},A=e("label",{class:"label"},"Nombre",-1),z={class:"control"},L={class:"field"},S=e("label",{class:"label"},"Apellido",-1),T={class:"control"},F={class:"field"},$=e("label",{class:"label"},"Fecha Nacimiento",-1),j={class:"control"},G={class:"field"},M=e("label",{class:"label"},"Fecha Registro",-1),q={class:"control"},H={class:"field mt-5"},I={class:"column mt-5"},J={class:"container mb-3"},K={class:"table is-fullwidth","aria-label":"Tabla de empleados"},Q=e("thead",null,[e("tr",null,[e("th",null,"Acciones"),e("th",null,"Nombre"),e("th",null,"Apellido"),e("th",null,"Nacimiento"),e("th",null,"Fecha Alta"),e("th",null,"Legajo")])],-1),W=e("td",null,null,-1),X={class:"container"},Y={class:"pagination is-centered is-rounded",role:"navigation","aria-label":"pagination"},Z={class:"pagination-list"},x=e("li",null,[e("span",{class:"pagination-ellipsis"},"…")],-1),ee={key:0},te={key:1},se=e("li",null,[e("span",{class:"pagination-ellipsis"},"…")],-1);function ae(t,s,h,i,ie,n){const m=O("RouterLink");return g(),p("div",R,[e("div",E,[e("div",B,[e("div",N,[b(m,{to:"/employees/new",class:"button is-info is-outlined is-fullwidth"},{default:P(()=>[k("Alta Empleado ")]),_:1})]),e("form",{onSubmit:s[7]||(s[7]=v(a=>n.fetchEmployees(1),["prevent"]))},[e("div",C,[V,e("div",U,[r(e("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=a=>t.pageOptions.size=a),type:"number"},null,512),[[d,t.pageOptions.size]])])]),e("div",_,[A,e("div",z,[r(e("input",{class:"input","onUpdate:modelValue":s[1]||(s[1]=a=>t.filters.name=a),type:"text",placeholder:"Nombre"},null,512),[[d,t.filters.name]])])]),e("div",L,[S,e("div",T,[r(e("input",{class:"input","onUpdate:modelValue":s[2]||(s[2]=a=>t.filters.lastname=a),type:"text",placeholder:"Apellido"},null,512),[[d,t.filters.lastname]])])]),e("div",F,[$,e("div",j,[r(e("input",{class:"input mb-1","onUpdate:modelValue":s[3]||(s[3]=a=>t.filters.lowerBirthdate=a),type:"date"},null,512),[[d,t.filters.lowerBirthdate]]),r(e("input",{class:"input","onUpdate:modelValue":s[4]||(s[4]=a=>t.filters.higherBirthdate=a),type:"date"},null,512),[[d,t.filters.higherBirthdate]])])]),e("div",G,[M,e("div",q,[r(e("input",{class:"input mb-1","onUpdate:modelValue":s[5]||(s[5]=a=>t.filters.lowerRegistrationDate=a),type:"date"},null,512),[[d,t.filters.lowerRegistrationDate]]),r(e("input",{class:"input","onUpdate:modelValue":s[6]||(s[6]=a=>t.filters.higherRegistrationDate=a),type:"date"},null,512),[[d,t.filters.higherRegistrationDate]])])]),e("div",H,[e("button",{type:"submit",class:o([{"is-loading":t.loadingPage},"button is-primary is-fullwidth"])},"Buscar ",2)])],32)]),e("div",I,[e("div",J,[e("table",K,[Q,e("tbody",null,[(g(!0),p(y,null,w(t.employees,a=>(g(),p("tr",null,[W,e("td",null,l(a.name),1),e("td",null,l(a.lastname),1),e("td",null,l(new Date(a.birthdate).toLocaleDateString()),1),e("td",null,l(new Date(a.registrationDate).toLocaleDateString()),1),e("td",null,l(a.idEmployee),1)]))),256))])])]),e("div",X,[e("nav",Y,[e("button",{onClick:s[8]||(s[8]=a=>n.fetchEmployees(t.pageOptions.actualPage-1)),type:"button",class:o([{"is-disabled":!t.pageOptions.hasPreviousPage||t.loadingPage},"pagination-previous"])},"Anterior ",2),e("button",{onClick:s[9]||(s[9]=a=>n.fetchEmployees(t.pageOptions.actualPage+1)),type:"button",class:o([{"is-disabled":!t.pageOptions.hasNextPage||t.loadingPage},"pagination-next"])}," Proxima ",2),e("ul",Z,[e("li",null,[e("button",{onClick:s[10]||(s[10]=a=>n.fetchEmployees(1)),class:o([{"is-disabled":t.loadingPage},"pagination-link"]),"aria-label":"Goto page 1"},"1 ",2)]),x,t.pageOptions.hasPreviousPage?(g(),p("li",ee,[e("button",{type:"button",class:o([{"is-disabled":t.loadingPage},"pagination-link"]),onClick:s[11]||(s[11]=a=>n.fetchEmployees(t.pageOptions.actualPage-1))},l(t.pageOptions.actualPage-1),3)])):u("",!0),e("li",null,[e("button",{type:"button",onClick:s[12]||(s[12]=a=>n.fetchEmployees(t.pageOptions.actualPage)),class:o([{"is-disabled":t.loadingPage},"pagination-link is-current"])},l(t.pageOptions.actualPage),3)]),t.pageOptions.hasNextPage?(g(),p("li",te,[e("button",{type:"button",onClick:s[13]||(s[13]=a=>n.fetchEmployees(t.pageOptions.actualPage+1)),class:o(["pagination-link",{"is-disabled":t.loadingPage}])},l(t.pageOptions.actualPage+1),3)])):u("",!0),se,e("li",null,[e("button",{type:"button",onClick:s[14]||(s[14]=a=>n.fetchEmployees(t.pageOptions.totalPages)),class:o(["pagination-link",{"is-disabled":t.loadingPage}])},l(t.pageOptions.totalPages),3)])])])])])])])}const ne=c(D,[["render",ae]]);export{ne as default};
